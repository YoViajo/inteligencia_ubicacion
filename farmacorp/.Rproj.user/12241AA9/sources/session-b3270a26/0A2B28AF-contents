# Instalar y cargar las bibliotecas necesarias
if (!require("jsonlite")) install.packages("jsonlite")
if (!require("dplyr")) install.packages("dplyr")
if (!require("leaflet")) install.packages("leaflet")

library(jsonlite)
library(dplyr)
library(leaflet)

# Cargar el archivo JSON exportado desde OverPass Turbo
json_file <- "ruta/al/archivo.json"
data <- fromJSON(json_file)

# Extraer los elementos relevantes
elements <- data$elements

# Filtrar solo los nodos (puntos)
nodes <- elements %>% filter(type == "node")

# Crear un data frame con las coordenadas y el nombre
farmacorp_locations <- nodes %>%
  select(id, lat, lon, tags.name) %>%
  rename(name = tags.name)

# Verificar los resultados
print(farmacorp_locations)

# Crear un mapa interactivo con Leaflet
map <- leaflet() %>%
  addTiles() %>%
  addMarkers(data = farmacorp_locations, 
             lat = ~lat, 
             lng = ~lon, 
             popup = ~name)

# Mostrar el mapa
map